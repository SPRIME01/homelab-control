```mermaid
flowchart TD
    Start([ğŸš€ Start]) --> Setup{First time?}

    Setup -->|Yes| InitEnv[ğŸ“‹ make setup<br/>Initialize environment]
    Setup -->|No| DevChoice{What do you want to do?}

    InitEnv --> EnvSetup[ğŸ Python 3.12.1 + uv<br/>ğŸ“¦ pnpm + Nx<br/>ğŸª Pre-commit hooks]
    EnvSetup --> DevChoice

    DevChoice -->|Create Service| NewApp[ğŸ“± make app NAME=my-service<br/>Generate Python application]
    DevChoice -->|Create Library| NewLib[ğŸ“š make lib NAME=shared-utils<br/>Generate Python library]
    DevChoice -->|Daily Development| DailyDev[ğŸ’» Daily Development Workflow]
    DevChoice -->|Deploy Infrastructure| InfraDeploy[â˜ï¸ Infrastructure Deployment]
    DevChoice -->|Configure Hosts| ConfigMgmt[âš™ï¸ Configuration Management]
    DevChoice -->|Monitor System| Monitoring[ğŸ“Š System Monitoring]

    NewApp --> CodeDev[âœï¸ Write code & tests]
    NewLib --> CodeDev

    CodeDev --> QualityCheck[ğŸ” make lint<br/>ğŸ§ make typecheck<br/>ğŸ§ª make test]
    QualityCheck --> QualityPass{Quality checks pass?}
    QualityPass -->|No| CodeDev
    QualityPass -->|Yes| BuildApp[ğŸ“¦ make build]

    BuildApp --> Container[ğŸ³ make containerize PROJECT=my-service<br/>Build & push to Harbor]
    Container --> GitCommit[ğŸ“ Git commit<br/>ğŸª Pre-commit hooks run]
    GitCommit --> GitPush[â¬†ï¸ Git push]
    GitPush --> ArgoSync[ğŸ”„ ArgoCD auto-sync<br/>Deploy to K3s]

    DailyDev --> QualityCheck

    InfraDeploy --> InfraPlan[ğŸ—ºï¸ make infra-plan TARGET=control-plane<br/>Review changes]
    InfraPlan --> InfraApprove{Changes look good?}
    InfraApprove -->|No| InfraDeploy
    InfraApprove -->|Yes| InfraApply[ğŸš€ make infra-apply TARGET=control-plane<br/>Deploy with Pulumi]
    InfraApply --> K3sReady[â˜¸ï¸ K3s cluster ready]

    ConfigMgmt --> AnsibleRun[âš™ï¸ make ansible-run PLAYBOOK=bootstrap-wsl2<br/>Configure WSL2 host]
    AnsibleRun --> HostReady[ğŸ–¥ï¸ Host configured]

    K3sReady --> ServicesReady[ğŸŒ Services available:<br/>â€¢ Traefik Dashboard<br/>â€¢ ArgoCD UI<br/>â€¢ Vault UI<br/>â€¢ Grafana<br/>â€¢ Homepage Portal]
    HostReady --> ServicesReady
    ArgoSync --> ServicesReady

    Monitoring --> Dashboard[ğŸ“Š Access dashboards:<br/>â€¢ Grafana (metrics)<br/>â€¢ Loki (logs)<br/>â€¢ Jaeger (traces)<br/>â€¢ Homepage (portal)]

    ServicesReady --> Success([âœ… Success!<br/>HomeStation operational])
    Dashboard --> Success

    Success --> DevChoice

    style Start fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    style Success fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    style QualityCheck fill:#fff3e0,stroke:#e65100,stroke-width:2px
    style ArgoSync fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    style ServicesReady fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
```
